 <div class="page">
    <div class="card">
      <div class="card-header">
        <h1 class="title">
          <span class="grad">Cirno</span> Todo App
        </h1>
        <div class="meta">
          <span>{{ leftCount }} do zrobienia</span>
          <div class="filters">
            <button (click)="setFilter('all')" [class.active]="filter() === 'all'">Wszystkie</button>
            <button (click)="setFilter('active')" [class.active]="filter() === 'active'">Aktywne</button>
            <button (click)="setFilter('done')" [class.active]="filter() === 'done'">Ukończone</button>
          </div>
        </div>
      </div>

      <div class="hero">
        <div class="avatar">
          <img src="assets/cirno.png" alt="Cirno">
          <span class="pulse"></span>
        </div>
        <div class="hero-copy">
          <p class="tag">Najlepsza na swiecie todo lista</p>
          <p class="line">Cirno pilnuje by nic ci nie uciekło.</p>
        </div>
      </div>

      <div class="add">
        <button class="toggle-all" (click)="toggleAll()" title="Zaznacz/Odznacz wszystkie">
          <svg viewBox="0 0 24 24" width="18" height="18">
            <path fill="currentColor" d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/>
          </svg>
        </button>
        <input
          type="text"
          placeholder="Dodaj zadanie i naciśnij Enter"
          [(ngModel)]="newText"
          (keyup.enter)="add()">
        <button class="add-btn" (click)="add()" [disabled]="!newText.trim()">Dodaj</button>
      </div>

      <ul class="list" *ngIf="filteredTodos().length; else empty">
        <li *ngFor="let todo of filteredTodos(); trackBy: trackById" class="item" [class.done]="todo.done">
          <label class="check">
            <input type="checkbox" [ngModel]="todo.done" (ngModelChange)="onDoneChange(todo, $event)">
            <span></span>
          </label>

          <div class="text" *ngIf="editingId !== todo.id" (dblclick)="startEdit(todo)">{{ todo.text }}</div>

          <input
            *ngIf="editingId === todo.id"
            class="edit"
            type="text"
            [(ngModel)]="editText"
            (blur)="commitEdit(todo)"
            (keydown.enter)="commitEdit(todo)"
            (keydown.escape)="cancelEdit()"
            autofocus>

          <div class="actions">
            <button class="icon" (click)="startEdit(todo)" title="Edytuj">
              <svg viewBox="0 0 24 24" width="18" height="18">
                <path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM21.41 6.34c.37-.37.37-.98 0-
  1.35l-2.41-2.41a.95.95 0 0 0-1.35 0l-1.83 1.83 3.75 3.75 1.84-1.82z"/>
              </svg>
            </button>
            <button class="icon danger" (click)="remove(todo)" title="Usuń">
              <svg viewBox="0 0 24 24" width="18" height="18">
                <path fill="currentColor" d="M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
              </svg>
            </button>
          </div>
        </li>
      </ul>

      <ng-template #empty>
        <div class="empty">Brak zadań. Dodaj pierwsze powyżej.</div>
      </ng-template>

      <div class="footer">
        <button class="clear" (click)="clearDone()">Usuń ukończone</button>
      </div>
    </div>
  </div>